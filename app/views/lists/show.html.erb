<div class="banner">
            <h1 class="text-white fw-bold"><%= @list.name.capitalize %></h1>
            <span class="badge-moviecount badge bg-warning"><%= @list.movies.count %> movies bookmarked</span>
</div>            
<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center">    
        <span class="d-block"><%= raw("<h3 class='text-danger'>You don't have any movies yet!</h3>") if @list.movies.empty? %></span>
        <%= render "shared/movie_button" %>
    </div>

    <% if !@list.movies.empty?%>
    <div class="row mt-3 gap-3 gx-0">

                <% @list.movies.each do |movie| %>
                <% bookmark = Bookmark.find_by(list: @list, movie: movie) %>
                
                <div class="card col-md-4 col-sm-10 p-0 shadow rounded-3">
                    <img class="card-image-top" style="height: 200px; object-fit: cover;" src="<%= movie.poster_url %>"/>                         
                    <div class="card-body bg-white">
                        <h4><%= movie.title %> • <%= movie.rating.round(1) %><i class="fa-solid fa-star fa-sm" style="color: yellow;"></i></h4>
                        <p class="fst-italic"><%= movie.overview.truncate(100) %></p>
                        <hr>
                        <p><i class="fa-solid fa-quote-left"></i>  <%= bookmark.comment %></p>
                        <%= link_to raw('<span><i class="fa-regular fa-trash-can"></i>  Delete</span>'), bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Delete movie?"},
                            class: "text-decoration-none" %>
                    </div>
                </div>
                <% end %>

    </div>
    <% end %>
    <hr>

    <div class="row">

        <div class="col-md-6 col-sm-10">
            <h3>Reviews</h3>
            <% if @reviews.count > 0 %>
                <% @reviews.each do |r| %>
                    <div class="border-bottom">
                        <p><% r.rating.times do %>
                            <i class="fa-solid fa-star" style="color: darkorange;"></i>
                            <% end %>
                            <small class="text-dark-subtle"><%= distance_of_time_in_words_to_now(r.created_at) %> ago</small>
                        </p>
                        <p class="fw-medium"><%= r.comment %></p>
                    </div>
                <% end %>
            <% else %>
                <h3 class="text-warning">(No reviews yet!)</h3>
            <% end %>
        </div>

        <div class="col-md-6 col-sm-10 bg-white rounded p-3">
            <h4 class="mt-3">Add your review</h4>
            <%= simple_form_for [@list, @review] do |review| %>
                <%= review.input :comment, placeholder: "Add your review here…" %>
                <%= review.input :rating, as: :select, collection: (1..5), required: true %>
                <%= review.submit class: "btn btn-primary" %>
            <% end %>            
        </div>
    </div>

    <hr>
    <div class="col-6 mx-auto">
        <div class="bg-white rounded-3 p-3 shadow mt-3">
            <h3 class="mt-3">Add a movie</h3>
            <%= simple_form_for [@list, @bookmark] do |l| %>
                <%= l.input :comment, placeholder: "Enter movie comment" %>
                <%= l.association :movie, prompt: "Choose a movie" %>
                <%= l.submit class: "btn btn-primary" %>
            <% end %>
        </div>
    </div>

</div>